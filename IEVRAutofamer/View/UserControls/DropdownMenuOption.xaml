<UserControl x:Class="IEVRAutofamer.View.UserControls.DropdownMenuOption"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:IEVRAutofamer.View.UserControls"
             mc:Ignorable="d" 
             d:DesignHeight="100" d:DesignWidth="600"
             x:Name="root">

    <UserControl.Resources>
        <Style x:Name="DropDown" TargetType="{x:Type CheckBox}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type CheckBox}">
                        <Grid>
                            <Border x:Name="Border"
                                    Background="{StaticResource IEVRDarkBlue}"
                                    CornerRadius="10"
                                    BorderThickness="3"
                                    BorderBrush="{StaticResource IEVRYellow}"
                                    Height="40"
                                    Width="200"
                                    VerticalAlignment="Center"
                                    HorizontalAlignment="Center">
                            </Border>

                            <TextBox x:Name="TextObject"
                                     Background="Transparent"
                                     BorderThickness="0"
                                     Text="{Binding DropdownText, ElementName=root, Mode=TwoWay}"
                                     VerticalAlignment="Center"
                                     HorizontalAlignment="Left"
                                     Margin="10,0,0,0"
                                     FontSize="16"
                                     Foreground="{StaticResource IEVRYellow}"
                                     IsHitTestVisible="False">
                                <TextBox.Effect>
                                    <DropShadowEffect ShadowDepth="1" Opacity="0.3"/>
                                </TextBox.Effect>
                            </TextBox>

                            <Polygon x:Name="Arrow"
                                     Points="10,13 20,0,0,0"
                                     Fill="{StaticResource IEVRYellow}"
                                     StrokeThickness="3"
                                     VerticalAlignment="Center"
                                     HorizontalAlignment="Right"
                                     Margin="0,5,15,0">
                                <Polygon.Effect>
                                    <DropShadowEffect ShadowDepth="1" Opacity="0.6"/>
                                </Polygon.Effect>
                            </Polygon>

                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>
        
    <Grid HorizontalAlignment="Left">
        <StackPanel Orientation="Horizontal"
                    VerticalAlignment="Center"
                    Height="45"
                    HorizontalAlignment="Left">

            <TextBlock x:Name="toggleText" Text="{Binding Text}"
                     FontSize="22"
                     FontWeight="Bold"
                     Foreground="{Binding TextColor}"
                     Width="325"
                     VerticalAlignment="Center"/>

            <CheckBox x:Name="dropdown"
                IsChecked="{Binding IsOpen, ElementName=root, Mode=TwoWay}"/>
        </StackPanel>

        <Popup x:Name="popup" 
               IsOpen="{Binding IsOpen, ElementName=root, Mode=TwoWay}" StaysOpen="False"
               Placement="Right"
               HorizontalOffset="-200"
               VerticalOffset="47"
               AllowsTransparency="True">

            <ContentControl x:Name="container" 
                            Content="{Binding MenuContent, ElementName=root, Mode=TwoWay}"/>

        </Popup>
    </Grid>
</UserControl>
